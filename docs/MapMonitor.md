# MapMonitor websocket Api

All interfaces for map monitoring use websocket

**MESSAGEID**

The messageId is generated by the client and returned as is.
The interface can also be actively pushed.

**End Point:** ws://{server url}/api/v2

**API**

GetMapData

**Request Data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "getMapData",
	"token": "78C4C484-9D7A-4731-A841-4B6B99D4BC87",
	"data":null
}
```

**Response data**

```json
 {
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "getMapData",
	"code": 1,
	"data": [{
			"type": 4,
			"xcoord": 2,
			"ycoord": 5,
			"gridPathRotation": 15,
			"taken": false,
			"holded": false,
			"chargeID": 0,
		}

	]
}
   
```

**API**

GetPodInfo

**Request Data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "GetPodInfo",
	"token": "78C4C484-9D7A-4731-A841-4B6B99D4BC87",
	"data":null
}
```

**Response data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "GetPodInfo",
	"code": 1,
	"data": [{
			"PODID": -1,
			"xcoord": 2,
			"ycoord": 5,
			"holded": false,
			"rotation": -1
		}]
}
   
```


**API**

GetRobotInfo

**Request Data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "GetRobotInfo",
	"token": "78C4C484-9D7A-4731-A841-4B6B99D4BC87",
	"data":null/robotId
}
```

**Response data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "GetRobotInfo",
	"code": 1,
	"data": [{
		robotID: 1,
		time: 1589463615003,
		podId: 0,
		taskId: -1,
		robotTransxPos: 28000,
		robotTransyPos: 2000,
		robotTransId: 0,
		robotTransDirection: 180,
		podTransDirection: 0,
		remainMission: 0,
		remainDistance: 1,
		reBattery: 32500,
		reCurrent: 0,
		errorCode: 0,
		warningCode: 0,
		isPlate: 0,
		isFar: 0,
		desX: 28,
		desY: 2,
		isShutdown: false,
		onQR: true,
		isPlateTopSensorOn: false,
		isPlateBottomSensorOn: true,
		isLaserDetectFar: false,
		isLaserDetectNear: false,
		isLaserDetectMiddle: false
	}]
}
   
```

**API**

MoveRobot

**Request Data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "MoveRobot",
	"token": "78C4C484-9D7A-4731-A841-4B6B99D4BC87",
	"data": {
		robotID: 1,
		podId: -1,
		podDirection: 1,
		desX: 28,
		desY: 2
	}
}
```

**Response data**

```json
{
	"messageId": "e8bfeceb-3b8a-44b5-aea9-b2c60530e8df",
	"api": "MoveRobot",
	"code": 1,
	"data": "Successful operation"
}
   
 
Notice:After successful operation, RobotInfo is actively pushed
   
   
```


